<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Instamart – Quick Food Delivery</title>
<style>
  *{box-sizing:border-box;font-family:Arial,sans-serif}
  body{margin:0;padding:20px;background:linear-gradient(135deg,#ffecd2,#fcb69f)}
  .wrap{max-width:900px;margin:auto;background:#fff;border-radius:14px;
        box-shadow:0 6px 16px rgba(0,0,0,.15);overflow:hidden}
  .head{background:linear-gradient(135deg,#ff6f00,#ff8f00);color:#fff;
        padding:12px 20px;display:flex;justify-content:space-between;align-items:center}
  .head h1{margin:0;font-size:20px}
  .tag{font-size:11px;background:rgba(255,255,255,.2);padding:3px 8px;border-radius:999px}
  .body{padding:18px 22px;display:grid;grid-template-columns:1.6fr 1fr;gap:14px}
  @media(max-width:800px){.body{grid-template-columns:1fr}}
  .sec{margin-bottom:10px;padding:10px 12px;border-radius:10px;background:#fafafa;border:1px solid #eee}
  .title{font-weight:bold;color:#ff6f00;margin-bottom:4px}
  .small{font-size:12px;color:#666;margin-bottom:6px}
  .grid{display:grid;grid-template-columns:1fr 1fr;gap:6px}
  .item{background:#fff;border-radius:8px;border:1px solid #eee;padding:6px 8px;
        display:flex;justify-content:space-between;align-items:center;font-size:13px}
  .left{display:flex;align-items:center;gap:6px}
  .price{font-size:11px;color:#777}
  input[type="number"],input[type="text"],select{
    width:100%;padding:5px 7px;border-radius:6px;border:1px solid #ccc;
    font-size:13px;margin:3px 0 6px
  }
  .radios{display:flex;flex-wrap:wrap;gap:8px;margin:4px 0 6px}
  .radios label{font-size:13px;background:#fff;border-radius:999px;
                border:1px solid #eee;padding:3px 10px;cursor:pointer}
  .btn{border:none;border-radius:999px;padding:7px 12px;font-size:13px;cursor:pointer;
       margin:4px 3px 0}
  .p{background:#ff6f00;color:#fff}
  .s{background:#ffe0c2;color:#a84303}
  .t{background:#e3f2fd;color:#0d47a1}
</style>
</head>
<body>
<div class="wrap">
  <div class="head">
    <h1>Swiggy Instamart – Quick Food Delivery</h1>
    <span class="tag">Food Dishes + Test Cases</span>
  </div>

  <div class="body">
    <!-- LEFT: APP -->
    <div>
      <div class="sec">
        <div class="title">1. Food Items (Dishes)</div>
        <div class="small">Select at least one dish with quantity &gt; 0.</div>
        <div class="grid">
          <div class="item">
            <div class="left">
              <input type="checkbox" id="vegB">
              <div>Veg Biryani<div class="price">₹150</div></div>
            </div>
            Qty <input type="number" id="qVegB" min="0" value="0" style="width:55px">
          </div>
          <div class="item">
            <div class="left">
              <input type="checkbox" id="chkB">
              <div>Chicken Biryani<div class="price">₹200</div></div>
            </div>
            Qty <input type="number" id="qChkB" min="0" value="0" style="width:55px">
          </div>
          <div class="item">
            <div class="left">
              <input type="checkbox" id="pnr">
              <div>Paneer Butter Masala<div class="price">₹180</div></div>
            </div>
            Qty <input type="number" id="qPnr" min="0" value="0" style="width:55px">
          </div>
          <div class="item">
            <div class="left">
              <input type="checkbox" id="dosa">
              <div>Masala Dosa<div class="price">₹80</div></div>
            </div>
            Qty <input type="number" id="qDosa" min="0" value="0" style="width:55px">
          </div>
          <div class="item">
            <div class="left">
              <input type="checkbox" id="gulab">
              <div>Gulab Jamun<div class="price">₹60</div></div>
            </div>
            Qty <input type="number" id="qGulab" min="0" value="0" style="width:55px">
          </div>
        </div>
      </div>

      <div class="sec">
        <div class="title">2. Delivery Slot</div>
        <div class="small">Choose one valid quick-delivery slot.</div>
        <select id="slot">
          <option value="">-- Choose Slot --</option>
          <option value="9-11">09:00 – 11:00</option>
          <option value="11-13">11:00 – 13:00</option>
          <option value="13-15">13:00 – 15:00</option>
          <option value="19-21">19:00 – 21:00</option>
        </select>
      </div>

      <div class="sec">
        <div class="title">3. Payment</div>
        <div class="small">Select payment and fill required field.</div>
        <div class="radios">
          <label><input type="radio" name="pay" value="COD"> COD</label>
          <label><input type="radio" name="pay" value="UPI"> UPI</label>
          <label><input type="radio" name="pay" value="CARD"> Card</label>
        </div>
        <label>UPI ID (for UPI)</label>
        <input type="text" id="upi" placeholder="example@upi">
        <label>Card Number (for Card)</label>
        <input type="text" id="card" placeholder="16 digit number">
      </div>

      <div class="sec">
        <div class="title">4. Delivery Address &amp; Pincode (ECP)</div>
        <div class="small">
          Valid: pincode = 6 digits (no leading 0), address ≥ 5 chars, city ≥ 3 chars.
        </div>
        <label>Address Line 1</label>
        <input type="text" id="addr1" placeholder="Flat / House / Street">
        <label>City</label>
        <input type="text" id="city" placeholder="City">
        <label>Pincode</label>
        <input type="text" id="pin" placeholder="6 digit pincode">
      </div>

      <div class="sec" style="text-align:right">
        <button class="btn p" onclick="placeOrder()">Place Order</button>
        <button class="btn s" onclick="resetForm()">Reset</button>
      </div>
    </div>

    <!-- RIGHT: TESTS -->
    <div>
      <div class="sec">
        <div class="title">Automated Test Cases</div>
        <div class="small">
          Covers: Product selection, Slot, Payment, Pincode (ECP), Final Order.<br>
          Each test case shows a popup with <b>PASS / FAIL</b>.
        </div>
        <button class="btn t" onclick="runAllTests()">Run ALL Test Cases</button>
      </div>
    </div>
  </div>
</div>

<script>
  /* ---------- VALIDATIONS ---------- */
  function validateProducts(arr){
    return arr.some(p=>p.sel&&p.qty>0);
  }
  function validateSlot(slot){
    const s=["9-11","11-13","13-15","19-21"];
    return s.includes(slot);
  }
  function validatePayment(m,u,c){
    if(!m)return false;
    if(m==="COD")return true;
    if(m==="UPI"){
      u=(u||"").trim();
      return u.length>0 && u.includes("@");
    }
    if(m==="CARD"){
      c=(c||"").replace(/\s+/g,"");
      return /^\d{16}$/.test(c);
    }
    return false;
  }
  function validateAddress(a,city,p){
    a=(a||"").trim();city=(city||"").trim();p=(p||"").trim();
    const pinOK=/^[1-9][0-9]{5}$/.test(p);
    return pinOK && a.length>=5 && city.length>=3;
  }
  function validateOrder(pOK,sOK,pmOK,adOK,amt){
    return pOK && sOK && pmOK && adOK && amt>0;
  }

  function showResult(id,desc,exp,act){
    alert("["+id+"] "+(exp===act?"PASS":"FAIL")+
          "\n"+desc+"\nExpected: "+exp+"\nActual:   "+act);
  }

  /* ---------- TEST CASES ---------- */
  function testProducts(){
    showResult("P1","No dish selected (FAIL)",
      false, validateProducts([]));
    showResult("P2","One dish qty=1 (PASS)",
      true, validateProducts([{sel:true,qty:1}]));
    showResult("P3","All dishes qty=0 (FAIL)",
      false, validateProducts([{sel:true,qty:0},{sel:true,qty:0}]));
  }
  function testSlots(){
    showResult("S1","No slot (FAIL)",false,validateSlot(""));
    showResult("S2","Valid slot 9-11 (PASS)",true,validateSlot("9-11"));
    showResult("S3","Invalid slot 25-27 (FAIL)",false,validateSlot("25-27"));
  }
  function testPayments(){
    showResult("PAY1","No method (FAIL)",false,validatePayment(null,"",""));
    showResult("PAY2","COD (PASS)",true,validatePayment("COD","",""));
    showResult("PAY3","UPI user@upi (PASS)",true,validatePayment("UPI","user@upi",""));
    showResult("PAY4","UPI empty (FAIL)",false,validatePayment("UPI","",""));
    showResult("PAY5","CARD 16 digits (PASS)",true,validatePayment("CARD","","1111222233334444"));
    showResult("PAY6","CARD short (FAIL)",false,validatePayment("CARD","","1234"));
  }
  function testPincode(){
    showResult("PIN1","Valid pincode+addr+city (PASS)",
      true,validateAddress("Flat 101, Main Rd","Hyd","500001"));
    showResult("PIN2","Short pincode 5000 (FAIL)",
      false,validateAddress("Flat 101, Main Rd","Hyd","5000"));
    showResult("PIN3","Non-numeric 50A001 (FAIL)",
      false,validateAddress("Flat 101, Main Rd","Hyd","50A001"));
    showResult("PIN4","Addr too short (FAIL)",
      false,validateAddress("Apt","Hyd","500001"));
  }
  function testOrder(){
    showResult("ORD1","All valid, amount>0 (PASS)",
      true,validateOrder(true,true,true,true,250));
    showResult("ORD2","Product invalid (FAIL)",
      false,validateOrder(false,true,true,true,250));
    showResult("ORD3","Amount=0 (FAIL)",
      false,validateOrder(true,true,true,true,0));
  }
  function runAllTests(){
    testProducts();testSlots();testPayments();testPincode();testOrder();
  }

  /* ---------- REAL ORDER FLOW ---------- */
  function placeOrder(){
    const dishes=[
      {c:"vegB",q:"qVegB",price:150},
      {c:"chkB",q:"qChkB",price:200},
      {c:"pnr", q:"qPnr", price:180},
      {c:"dosa",q:"qDosa",price:80},
      {c:"gulab",q:"qGulab",price:60}
    ];
    let list=[],amount=0;
    dishes.forEach(d=>{
      const sel=document.getElementById(d.c).checked;
      const qty=parseInt(document.getElementById(d.q).value||"0",10);
      list.push({sel,qty});
      if(sel&&qty>0)amount+=qty*d.price;
    });
    const pOK=validateProducts(list);
    if(!pOK){alert("Order FAILED at Dishes.\nSelect at least one dish with qty > 0.");return;}

    const slot=document.getElementById("slot").value;
    const sOK=validateSlot(slot);
    if(!sOK){alert("Order FAILED at Slot.\nChoose a valid delivery slot.");return;}

    let method=null;
    document.querySelectorAll("input[name='pay']").forEach(r=>{if(r.checked)method=r.value;});
    const pmOK=validatePayment(method,document.getElementById("upi").value,
                               document.getElementById("card").value);
    if(!pmOK){alert("Order FAILED at Payment.\nSelect correct method and details.");return;}

    const adOK=validateAddress(
      document.getElementById("addr1").value,
      document.getElementById("city").value,
      document.getElementById("pin").value
    );
    if(!adOK){alert("Order FAILED at Address / Pincode.\nCheck 6-digit pincode, address, city.");return;}

    const finalOK=validateOrder(pOK,sOK,pmOK,adOK,amount);
    if(!finalOK){alert("Order FAILED at Final Check.\nAmount must be > 0.");return;}

    alert("Order SUCCESS ✅\nTotal: ₹"+amount+"\nSlot: "+slot+"\nPayment: "+method);
  }

  function resetForm(){
    ["vegB","chkB","pnr","dosa","gulab"].forEach(id=>document.getElementById(id).checked=false);
    ["qVegB","qChkB","qPnr","qDosa","qGulab"].forEach(id=>document.getElementById(id).value=0);
    document.getElementById("slot").value="";
    document.querySelectorAll("input[name='pay']").forEach(r=>r.checked=false);
    ["upi","card","addr1","city","pin"].forEach(id=>document.getElementById(id).value="");
  }
</script>
</body>
</html>